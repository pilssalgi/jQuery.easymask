(function(){(function(jQuery){var $;$=jQuery;return $.fn.wheelOverScroll=function(config){var defaultConfig,options;defaultConfig={margintop:120,marginbottom:120};options=$.extend(defaultConfig,config);return this.each(function(){var _this=this;$.fn.wheelOverScroll.resize=function(){var areaHeight,bodyHeight;areaHeight=$(_this).wheelOverScroll.windowHeight();try{bodyHeight=$(_this).find("#bottomMargin").offset().top+$(_this).find("#bottomMargin").outerHeight(true);}catch(er){bodyHeight=$(document).height;}_this.scroll_Height=bodyHeight - areaHeight - 100;if(_this.scroll_Height<0){_this.scroll_Height=0;}return $(_this).css({height:bodyHeight+"px",overflow:"hidden"});};$.fn.wheelOverScroll.windowHeight=function(){var size;size=0;if(document.documentElement.clientHeight){size=document.documentElement.clientHeight;}else{if(document.body.clientHeight){size=document.body.clientHeight;}else{if(window.innerHeight){size=window.innerHeight;}}}return size;};$(this).bind({"mousewheel":function(e,delta){var o,y;o=options;y=$(window).scrollTop();if(_this.isJump){if(y<=0 && delta>0 && o.margintop>0){_this.pTopForce+=delta * 0.5+_this.pTop * 0.2;}else if(delta<0 && o.marginbottom>0){_this.pBottomForce+=delta * -0.5+_this.pBottom * 0.2;}if(_this.Timer==null){_this.Timer=setInterval(_this.jumpWait,1000/60);}}else{if(_this.scroll_Height>0){if(y>0 && y<_this.scroll_Height){return;}}if(y<=0 && delta>0 && o.margintop>0){_this.pTopForce+=delta * 1+_this.pTop * 0.2;if(_this.Timer==null){return _this.Timer=setInterval(_this.update,1000/60);}}else if(delta<0 && o.marginbottom>0){_this.pBottomForce+=delta * -1+_this.pBottom * 0.2;if(_this.Timer==null){return _this.Timer=setInterval(_this.update,1000/60);}}}}});this.update=function(){var o,p_bottom,p_top,y;o=options;if((_this.pTop>=o.margintop && _this.pTop>0)||(_this.pBottom>=o.marginbottom && _this.pBottom>0)){_this.isJump=true;$(".scrollMarginPreloading").css("display","block");clearInterval(_this.Timer);_this.Timer=setInterval(_this.jumpWait,1000/60);return;}if(_this.pTop>0){_this.pTopForce -=1;}if(_this.pBottom>0){_this.pBottomForce -=1;}_this.pTop+=_this.pTopForce * 0.2 - _this.pTop * _this.pTop * 0.0005;_this.pBottom+=_this.pBottomForce * 0.2 - _this.pBottom * _this.pBottom * 0.0005;if(_this.pTop<1){_this.pTop=0;}if(_this.pBottom<1){_this.pBottom=0;}if(_this.pTop<=0 && _this.pBottom<=0){clearInterval(_this.Timer);_this.Timer=null;}p_top=_this.pTop+o.def_padding_top;p_bottom=_this.pBottom+o.def_padding_bottom;y=_this.pTop - _this.pBottom;if(y>0){y=0;}$(_this.pageObj).css("top",y+"px");$(_this.topObj).css("height",_this.pTop+"px");return $(_this.bottomObj).css("height",_this.pBottom+"px");};this.jumpWait=function(){var o;if(_this.pTopForce>0){_this.pTopForce -=_this.pTopForce * 0.2+0.1;}if(_this.pBottomForce>0){_this.pBottomForce -=_this.pBottomForce * 0.2+0.1;}if(_this.pTopForce<=0 && _this.pBottomForce<=0){clearInterval(_this.Timer);_this.Timer=null;o=options;if(_this.pTop>=o.margintop){_this.pTop=o.margintop;if(_this.link_prev !=null){location.href=_this.link_prev;}$(_this).trigger("overtop");}if(_this.pBottom>=o.marginbottom){_this.pBottom=o.marginbottom;if(_this.link_next !=null){location.href=_this.link_next;}return $(_this).trigger("overbottom");}}};this.isJump=false;this.pTopForce=0;this.pBottomForce=0;this.pTop=0;this.pBottom=0;this.pageObj=$(this).children(".body");this.topObj=$(this).find("#topmargin");this.bottomObj=$(this).find("#bottomMargin");this.link_next=$('link[rel="next"]').attr("href");this.link_prev=$('link[rel="prev"]').attr("href");$(this).wheelOverScroll.resize();return $(window).bind("load resize",$(this).wheelOverScroll.resize);});};})(jQuery);}).call(this);